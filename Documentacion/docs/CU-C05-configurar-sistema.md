# CU-C05: Configurar Par√°metros del Sistema de Lealtad

## Diagrama de Secuencia

![Diagrama de Secuencia](secuencia-configurar-sistema.puml)

## Especificaci√≥n del Caso de Uso

| **Campo**                 | **Descripci√≥n**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **ID**                    | CU-C05                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **Nombre**                | Configurar Par√°metros del Sistema de Lealtad                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **Actor Principal**       | Administrador                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **Descripci√≥n**           | Permite al administrador ajustar los par√°metros generales del sistema de lealtad como tasas de conversi√≥n, bonificaciones, tiempos de expiraci√≥n y reglas de canje                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **Precondiciones**        | - El administrador debe estar autenticado<br>- El administrador debe tener permisos de configuraci√≥n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **Postcondiciones**       | - Los par√°metros se actualizan en la base de datos<br>- Los cambios se aplican inmediatamente en el sistema<br>- Las nuevas transacciones usan los valores actualizados                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **Flujo Principal**       | 1. El administrador accede a "Configuraci√≥n del Sistema"<br>2. El sistema carga todos los par√°metros agrupados por categor√≠a<br>3. El sistema muestra el formulario con valores actuales:<br><br>**‚≠ê Sistema de Puntos:**<br>&nbsp;&nbsp;&nbsp;- Puntos por D√≥lar (ej: 1)<br>&nbsp;&nbsp;&nbsp;- Bonus Compras Online % (ej: 30%)<br>&nbsp;&nbsp;&nbsp;- D√≠as de Expiraci√≥n de Puntos (ej: 365)<br><br>**üéÅ Recompensas:**<br>&nbsp;&nbsp;&nbsp;- D√≠as de Validez de Cupones (ej: 60)<br>&nbsp;&nbsp;&nbsp;- Puntos M√≠nimos para Canjear (ej: 100)<br><br>4. El administrador modifica los valores deseados<br>5. El administrador hace clic en "Guardar Configuraci√≥n"<br>6. El sistema valida los datos<br>7. El sistema actualiza cada par√°metro en la base de datos<br>8. El sistema redirige con mensaje de √©xito |
| **Flujos Alternativos**   | **FA1: Valores inv√°lidos**<br>- En el paso 6, si alg√∫n valor es negativo o inv√°lido<br>- El sistema muestra errores de validaci√≥n<br>- Retorna al paso 4<br><br>**FA2: Cambio de bonus online**<br>- Si se modifica `online_bonus_percentage`<br>- Solo afecta compras futuras<br>- Las transacciones pasadas no se recalculan                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **Reglas de Negocio**     | - `points_per_dollar` debe ser >= 1<br>- `online_bonus_percentage` debe ser >= 0 y <= 200<br>- `points_expiration_days` debe ser >= 30<br>- `coupon_validity_days` debe ser >= 1<br>- `min_points_to_redeem` debe ser >= 0<br>- Los cambios NO afectan transacciones pasadas                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **Requisitos Especiales** | - Los cambios se aplican inmediatamente sin reiniciar<br>- Se debe mostrar informaci√≥n de ayuda para cada par√°metro<br>- Los valores deben validarse en tiempo real                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **Informaci√≥n Adicional** | **Impacto de cada par√°metro:**<br><br>**Puntos por D√≥lar:**<br>- Afecta: C√°lculo de puntos en compras<br>- Ejemplo: 2 = doble de puntos por compra<br><br>**Bonus Online:**<br>- Afecta: Compras en e-commerce<br>- Ejemplo: 30% = 1.3x puntos en compras online<br><br>**Expiraci√≥n de Puntos:**<br>- Afecta: Validez de puntos ganados<br>- Ejemplo: 365 = puntos v√°lidos por 1 a√±o<br><br>**Validez de Cupones:**<br>- Afecta: Tiempo para usar cupones canjeados<br>- Ejemplo: 60 = cup√≥n v√°lido por 60 d√≠as<br><br>**Puntos M√≠nimos:**<br>- Afecta: Restricci√≥n para canjear<br>- Ejemplo: 100 = debe tener m√≠nimo 100 pts para canjear cualquier recompensa                                                                                                                                                       |
